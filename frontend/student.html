<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Student Portal - PDF Quiz Generator</title>
    <link rel="stylesheet" href="css/student.css">
    <link rel="stylesheet" href="css/main.css">
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css">
    <link href="https://fonts.googleapis.com/css2?family=Poppins:wght@300;400;500;600;700&display=swap" rel="stylesheet">
    <script src="https://cdn.jsdelivr.net/npm/chart.js"></script>
</head>
<body>
    <!-- Header -->
    <header class="student-header">
        <div class="header-left">
            <div class="logo">
                <i class="fas fa-graduation-cap"></i>
                <h1>Student Portal</h1>
            </div>
            <nav class="student-nav">
                <ul>
                    <li><a href="#" class="nav-link active" data-section="dashboard"><i class="fas fa-home"></i> Dashboard</a></li>
                    <li><a href="#" class="nav-link" data-section="available-quizzes"><i class="fas fa-list-alt"></i> Available Quizzes</a></li>
                    <li><a href="#" class="nav-link" data-section="my-quizzes"><i class="fas fa-history"></i> My Quizzes</a></li>
                    <li><a href="#" class="nav-link" data-section="performance"><i class="fas fa-chart-line"></i> Performance</a></li>
                    <li><a href="#" class="nav-link" data-section="resources"><i class="fas fa-book"></i> Resources</a></li>
                </ul>
            </nav>
        </div>
        <div class="header-right">
            <div class="user-profile">
                <div class="profile-info">
                    <span id="studentName">Loading...</span>
                    <small id="studentEmail">Loading...</small>
                </div>
                <div class="profile-actions">
                    <button id="studentLogoutBtn" class="btn-logout">
                        <i class="fas fa-sign-out-alt"></i> Logout
                    </button>
                </div>
            </div>
        </div>
    </header>

    <!-- Main Content -->
    <main class="student-main">
        <!-- Dashboard Section -->
        <section id="dashboard" class="student-section active">
            <div class="welcome-banner">
                <div class="welcome-content">
                    <h2>Welcome, <span id="welcomeName">Student</span>!</h2>
                    <p>Ready to test your knowledge? Take a quiz or check your progress.</p>
                    <div class="quick-stats">
                        <div class="quick-stat">
                            <i class="fas fa-trophy"></i>
                            <div>
                                <h3 id="completedQuizzes">0</h3>
                                <p>Quizzes Completed</p>
                            </div>
                        </div>
                        <div class="quick-stat">
                            <i class="fas fa-star"></i>
                            <div>
                                <h3 id="avgStudentScore">0%</h3>
                                <p>Average Score</p>
                            </div>
                        </div>
                        <div class="quick-stat">
                            <i class="fas fa-clock"></i>
                            <div>
                                <h3 id="totalTime">0h</h3>
                                <p>Time Spent</p>
                            </div>
                        </div>
                    </div>
                </div>
                <div class="welcome-image">
                    <i class="fas fa-chalkboard-teacher"></i>
                </div>
            </div>

            <!-- Recommended Quizzes -->
            <div class="section-card">
                <div class="section-header">
                    <h3><i class="fas fa-lightbulb"></i> Recommended For You</h3>
                    <a href="#" class="view-all" data-section="available-quizzes">View All â†’</a>
                </div>
                <div class="quiz-grid" id="recommendedQuizzes">
                    <!-- Recommended quizzes will be loaded here -->
                </div>
            </div>

            <!-- Recent Activity -->
            <div class="section-card">
                <div class="section-header">
                    <h3><i class="fas fa-history"></i> Recent Activity</h3>
                </div>
                <div class="activity-timeline" id="studentActivity">
                    <!-- Activity items will be loaded here -->
                </div>
            </div>

            <!-- Progress Chart -->
            <div class="section-card">
                <div class="section-header">
                    <h3><i class="fas fa-chart-line"></i> Learning Progress</h3>
                </div>
                <div class="progress-chart">
                    <canvas id="progressChart"></canvas>
                </div>
            </div>
        </section>

        <!-- Available Quizzes Section -->
        <section id="available-quizzes" class="student-section">
            <div class="section-header">
                <h2><i class="fas fa-list-alt"></i> Available Quizzes</h2>
                <p>Browse and take quizzes on various topics</p>
            </div>

            <!-- Search and Filter -->
            <div class="quiz-filters">
                <div class="search-box">
                    <i class="fas fa-search"></i>
                    <input type="text" id="quizSearch" placeholder="Search quizzes...">
                </div>
                <div class="filter-group">
                    <label for="topicFilterStudent"><i class="fas fa-tag"></i> Topic:</label>
                    <select id="topicFilterStudent">
                        <option value="all">All Topics</option>
                    </select>
                </div>
                <div class="filter-group">
                    <label for="difficultyFilter"><i class="fas fa-signal"></i> Difficulty:</label>
                    <select id="difficultyFilter">
                        <option value="all">All Levels</option>
                        <option value="easy">Easy</option>
                        <option value="medium">Medium</option>
                        <option value="hard">Hard</option>
                    </select>
                </div>
            </div>

            <!-- Quizzes Grid -->
            <div class="quizzes-container">
                <div class="quizzes-grid" id="availableQuizzesGrid">
                    <!-- Available quizzes will be loaded here -->
                </div>
            </div>

            <!-- Pagination -->
            <div class="pagination">
                <button id="prevQuizPageBtn" disabled><i class="fas fa-chevron-left"></i> Previous</button>
                <span id="quizPageInfo">Page 1 of 1</span>
                <button id="nextQuizPageBtn" disabled>Next <i class="fas fa-chevron-right"></i></button>
            </div>
        </section>

        <!-- My Quizzes Section -->
        <section id="my-quizzes" class="student-section">
            <div class="section-header">
                <h2><i class="fas fa-history"></i> My Quiz Attempts</h2>
                <p>View your quiz history and results</p>
            </div>

            <!-- Tabs -->
            <div class="attempt-tabs">
                <button class="attempt-tab active" data-status="all">All Attempts</button>
                <button class="attempt-tab" data-status="completed">Completed</button>
                <button class="attempt-tab" data-status="in_progress">In Progress</button>
                <button class="attempt-tab" data-status="expired">Expired</button>
            </div>

            <!-- Attempts List -->
            <div class="attempts-list">
                <div class="table-container">
                    <table class="data-table">
                        <thead>
                            <tr>
                                <th>Quiz Title</th>
                                <th>Topic</th>
                                <th>Score</th>
                                <th>Time Spent</th>
                                <th>Status</th>
                                <th>Completed</th>
                                <th>Actions</th>
                            </tr>
                        </thead>
                        <tbody id="attemptsTableBody">
                            <!-- Attempt rows will be loaded here -->
                        </tbody>
                    </table>
                </div>
            </div>

            <!-- Performance Summary -->
            <div class="performance-summary">
                <h3><i class="fas fa-chart-pie"></i> Performance Summary</h3>
                <div class="summary-grid">
                    <div class="summary-card">
                        <div class="summary-icon" style="background: #4CAF50;">
                            <i class="fas fa-check-circle"></i>
                        </div>
                        <div class="summary-content">
                            <h4>Highest Score</h4>
                            <h2 id="highestScore">0%</h2>
                            <p id="highestScoreQuiz">-</p>
                        </div>
                    </div>
                    <div class="summary-card">
                        <div class="summary-icon" style="background: #2196F3;">
                            <i class="fas fa-tachometer-alt"></i>
                        </div>
                        <div class="summary-content">
                            <h4>Average Time</h4>
                            <h2 id="avgTime">0m</h2>
                            <p>Per Quiz</p>
                        </div>
                    </div>
                    <div class="summary-card">
                        <div class="summary-icon" style="background: #FF9800;">
                            <i class="fas fa-star"></i>
                        </div>
                        <div class="summary-content">
                            <h4>Topics Mastered</h4>
                            <h2 id="topicsMastered">0</h2>
                            <p>Score > 80%</p>
                        </div>
                    </div>
                    <div class="summary-card">
                        <div class="summary-icon" style="background: #9C27B0;">
                            <i class="fas fa-trend-up"></i>
                        </div>
                        <div class="summary-content">
                            <h4>Improvement</h4>
                            <h2 id="improvementRate">0%</h2>
                            <p>Last 7 days</p>
                        </div>
                    </div>
                </div>
            </div>
        </section>

        <!-- Performance Section -->
        <section id="performance" class="student-section">
            <div class="section-header">
                <h2><i class="fas fa-chart-line"></i> Performance Analytics</h2>
                <p>Track your learning progress and identify areas for improvement</p>
            </div>

            <div class="analytics-grid">
                <div class="analytics-card">
                    <h3><i class="fas fa-chart-bar"></i> Score Distribution</h3>
                    <canvas id="scoreChart"></canvas>
                </div>
                <div class="analytics-card">
                    <h3><i class="fas fa-clock"></i> Time Management</h3>
                    <canvas id="timeChart"></canvas>
                </div>
                <div class="analytics-card">
                    <h3><i class="fas fa-book"></i> Topic Performance</h3>
                    <canvas id="topicPerformanceChart"></canvas>
                </div>
                <div class="analytics-card">
                    <h3><i class="fas fa-calendar-alt"></i> Weekly Progress</h3>
                    <canvas id="weeklyProgressChart"></canvas>
                </div>
            </div>

            <!-- Strengths & Weaknesses -->
            <div class="strengths-weaknesses">
                <div class="sw-card">
                    <h3><i class="fas fa-thumbs-up"></i> Strengths</h3>
                    <div class="sw-list" id="strengthsList">
                        <!-- Strengths will be loaded here -->
                    </div>
                </div>
                <div class="sw-card">
                    <h3><i class="fas fa-thumbs-down"></i> Areas for Improvement</h3>
                    <div class="sw-list" id="weaknessesList">
                        <!-- Weaknesses will be loaded here -->
                    </div>
                </div>
            </div>

            <!-- Recommendations -->
            <div class="recommendations-card">
                <h3><i class="fas fa-lightbulb"></i> Personalized Recommendations</h3>
                <div class="recommendations-list" id="recommendationsList">
                    <!-- Recommendations will be loaded here -->
                </div>
            </div>
        </section>

        <!-- Resources Section -->
        <section id="resources" class="student-section">
            <div class="section-header">
                <h2><i class="fas fa-book"></i> Learning Resources</h2>
                <p>Access PDF materials and study guides</p>
            </div>

            <!-- PDF Resources -->
            <div class="resources-grid">
                <div class="resources-card">
                    <div class="resources-header">
                        <i class="fas fa-file-pdf"></i>
                        <h3>Available PDFs</h3>
                    </div>
                    <div class="resources-list" id="pdfResourcesList">
                        <!-- PDF resources will be loaded here -->
                    </div>
                </div>

                <div class="resources-card">
                    <div class="resources-header">
                        <i class="fas fa-graduation-cap"></i>
                        <h3>Study Guides</h3>
                    </div>
                    <div class="study-guides" id="studyGuides">
                        <!-- Study guides will be loaded here -->
                    </div>
                </div>

                <div class="resources-card">
                    <div class="resources-header">
                        <i class="fas fa-chart-pie"></i>
                        <h3>Topic Coverage</h3>
                    </div>
                    <div class="topic-coverage">
                        <canvas id="topicCoverageChart"></canvas>
                    </div>
                </div>
            </div>

            <!-- Quick Actions -->
            <div class="quick-actions">
                <h3><i class="fas fa-bolt"></i> Quick Actions</h3>
                <div class="actions-grid">
                    <button class="action-btn" id="downloadCertBtn">
                        <i class="fas fa-certificate"></i>
                        <span>Download Certificate</span>
                    </button>
                    <button class="action-btn" id="exportResultsBtn">
                        <i class="fas fa-download"></i>
                        <span>Export Results</span>
                    </button>
                    <button class="action-btn" id="requestQuizBtn">
                        <i class="fas fa-plus-circle"></i>
                        <span>Request New Quiz</span>
                    </button>
                    <button class="action-btn" id="feedbackBtn">
                        <i class="fas fa-comment"></i>
                        <span>Give Feedback</span>
                    </button>
                </div>
            </div>
        </section>
    </main>

    <!-- Quiz Taking Modal -->
    <div id="quizModal" class="modal">
        <div class="modal-content quiz-modal-content">
            <div class="quiz-header">
                <h3 id="quizModalTitle">Loading Quiz...</h3>
                <div class="quiz-timer">
                    <i class="fas fa-clock"></i>
                    <span id="quizTimer">00:00</span>
                </div>
                <span class="close-quiz-modal">&times;</span>
            </div>
            
            <div class="quiz-progress">
                <div class="progress-bar">
                    <div class="progress-fill" id="quizProgressFill"></div>
                </div>
                <div class="progress-text">
                    Question <span id="currentQuestion">1</span> of <span id="totalQuestions">10</span>
                </div>
            </div>

            <div class="quiz-body">
                <div class="question-container" id="questionContainer">
                    <!-- Questions will be loaded here -->
                </div>
            </div>

            <div class="quiz-footer">
                <button id="prevQuestionBtn" class="btn-secondary">
                    <i class="fas fa-arrow-left"></i> Previous
                </button>
                <div class="quiz-navigation">
                    <button class="nav-btn" data-question="1">1</button>
                    <!-- Navigation buttons will be generated -->
                </div>
                <button id="nextQuestionBtn" class="btn-primary">
                    Next <i class="fas fa-arrow-right"></i>
                </button>
                <button id="submitQuizBtn" class="btn-success" style="display: none;">
                    <i class="fas fa-paper-plane"></i> Submit Quiz
                </button>
            </div>
        </div>
    </div>

    <!-- Results Modal -->
    <div id="resultsModal" class="modal">
        <div class="modal-content results-modal-content">
            <span class="close-results-modal">&times;</span>
            <div class="results-header">
                <i class="fas fa-trophy"></i>
                <h2>Quiz Completed!</h2>
                <p>Here's how you performed</p>
            </div>
            
            <div class="results-summary">
                <div class="score-circle">
                    <div class="circle">
                        <h1 id="finalScore">0%</h1>
                    </div>
                    <p>Final Score</p>
                </div>
                
                <div class="results-stats">
                    <div class="stat">
                        <i class="fas fa-check"></i>
                        <div>
                            <h4 id="correctAnswers">0</h4>
                            <p>Correct</p>
                        </div>
                    </div>
                    <div class="stat">
                        <i class="fas fa-times"></i>
                        <div>
                            <h4 id="incorrectAnswers">0</h4>
                            <p>Incorrect</p>
                        </div>
                    </div>
                    <div class="stat">
                        <i class="fas fa-clock"></i>
                        <div>
                            <h4 id="timeTaken">0m</h4>
                            <p>Time Taken</p>
                        </div>
                    </div>
                </div>
            </div>

            <div class="results-details">
                <h3>Question Review</h3>
                <div class="review-list" id="reviewList">
                    <!-- Review items will be loaded here -->
                </div>
            </div>

            <div class="results-actions">
                <button id="retryQuizBtn" class="btn-secondary">
                    <i class="fas fa-redo"></i> Retry Quiz
                </button>
                <button id="viewAnswersBtn" class="btn-primary">
                    <i class="fas fa-eye"></i> View Detailed Answers
                </button>
                <button id="closeResultsBtn" class="btn-success">
                    <i class="fas fa-check"></i> Done
                </button>
            </div>
        </div>
    </div>

    <div id="notificationContainer" class="notification-container"></div>

    <script src="js/api.js"></script>
    <script src="js/student.js"></script>
</body>
</html>